# Бот для Подій Спільноти в Telegram

Node.js Telegram бот для керування подіями спільноти в груповому чаті. Цей бот дозволяє користувачам створювати події, переглядати майбутні та минулі події, а також бачити рейтинг найактивніших організаторів.

## Функціональність

- **Створення подій**: Покроковий майстер для створення нових подій
- **Опис події з HTML**: Обов'язковий форматований опис події з підтримкою HTML
- **Схвалення адміністратором**: Події потребують схвалення адміністратором перед публікацією
- **Список подій**: Перегляд майбутніх та минулих подій
- **Рейтинг**: Відстеження найактивніших організаторів подій у вашій спільноті
- **Підтримка тем**: Публікація подій у конкретних темах вашої групи
- **Автоматичні опитування**: Створення опитування про відвідування після публікації події
- **Перевірка членства**: Доступ до функцій бота лише для учасників групи
- **Клікабельні посилання**: Автоматичне форматування посилань на локації
- **Валідація дати**: Перевірка, що дата події не менше ніж за 30 хвилин у майбутньому
- **Зручний інтерфейс**: Кнопки для перезапуску створення події в будь-який момент

## Вимоги

- Node.js (v14 або вище)
- База даних MongoDB (безкоштовний тариф на MongoDB Atlas працює добре)
- Токен Telegram бота (від BotFather)
- Telegram група, де бот є адміністратором

## Налаштування

1. Клонуйте цей репозиторій
2. Встановіть залежності:
   ```
   npm install
   ```
3. Налаштуйте змінні середовища, редагуючи файл `.env`:
   ```
   BOT_TOKEN=ваш_токен_бота
   MONGODB_URI=ваш_рядок_підключення_mongodb
   ADMIN_USER_ID=ваш_telegram_id
   GROUP_CHAT_ID=id_вашої_групи
   TOPIC_ID=id_вашої_теми (необов'язково)
   ```

### Отримання необхідних ID

- **Токен бота**: Поговоріть з [@BotFather](https://t.me/botfather) в Telegram, щоб створити нового бота і отримати токен
- **ID адміністратора**: Надішліть повідомлення [@userinfobot](https://t.me/userinfobot), щоб отримати ваш Telegram ID
- **ID групового чату**: Тимчасово додайте [@RawDataBot](https://t.me/RawDataBot) до вашої групи, він покаже ID чату
- **ID теми**: Якщо використовуєте теми, це ID гілки повідомлень вашої теми

## Запуск бота

Запустіть бота командою:

```
node index.js
```

Для виробничого середовища рекомендується використовувати менеджер процесів, наприклад PM2:

```
npm install -g pm2
pm2 start index.js --name telegram-event-bot
```

## Команди бота

- `/start` - Знайомство з ботом
- `/help` - Показати доступні команди
- `/create` - Розпочати майстер створення події
- `/events` - Список майбутніх подій
- `/past` - Показати минулі події
- `/leaderboard` - Переглянути рейтинг організаторів
- `/restart` - Перезапустити бота (якщо щось не працює)

## Процес створення події

1. Користувач ініціює команду `/create`
2. Бот запитує назву події (Що?)
3. Бот запитує дату та час події (Коли?)
4. Бот запитує місце проведення події (Де?)
5. Бот запитує опис події (необов'язково, з підтримкою HTML)
6. Бот показує попередній перегляд і запитує підтвердження
7. Подія надсилається адміністратору для схвалення
8. Якщо схвалено, подія публікується в групі з опитуванням про відвідування

## License

MIT
